{extend name="base/tablebase"/}{block name="title"}系统管理员管理（重置密码的默认密码为：888888）{/block}{block name="table"}<!-- Example Card View --><div class="example-wrap">    <div class="example">        <div class="btn-group hidden-xs" id="exampleToolbar" role="group">            <button type="button" class="btn btn-outline btn-default" id="add" data-toggle="tooltip" data-animation="false" data-original-title="添加">                <i class="glyphicon glyphicon-plus" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="defriend" data-toggle="tooltip" data-animation="false" data-original-title="禁用">                <i class="glyphicon glyphicon-ban-circle" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="del" data-toggle="tooltip" data-animation="false" data-original-title="删除">                <i class="glyphicon glyphicon-trash" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="reset" data-toggle="tooltip" data-animation="false" data-original-title="重置">                <i class="glyphicon glyphicon-repeat" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="edit" data-toggle="tooltip" data-animation="false" data-original-title="修改">                <i class="glyphicon glyphicon-edit" aria-hidden="true"></i>            </button>        </div>        <table id="table" data-toggle="table" data-card-view="true" data-mobile-responsive="true" data-click-to-select="true" data-unique-id="uid" data-show-export="true">            <thead>            <tr>                <th data-field="state" data-checkbox="true"></th>                <th data-field="uid">UID</th>                <th data-formatter="groupFormatter" data-field="group">分组</th>                <th data-field="name" >姓名</th>                <th data-field="login_name" >登陆名</th>                <th data-field="login_count">登陆次数</th>                <th data-field="reg_time" data-sortable="true">注册时间</th>                <th data-field="status" data-formatter="statusFormatter" data-align="center" data-halign="center" data-sortable="true">状态</th>                <th data-formatter="showloginFormatter" data-align="center" data-halign="center">登录记录</th>            </tr>            </thead>        </table>    </div></div><!-- End Example Card View -->{/block}{block name="model"}<div class="modal fade add-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title">添加</h4>            </div>            <div class="modal-body">                <form method="post" id="add-form">                    <div class="form-group">                        <label>姓名</label>                        <input type="text" id="name" name="name" placeholder="请输入用户名" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>登录名</label>                        <input type="text" id="login_name" name="login_name" placeholder="请输入登陆账户" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>密码</label>                        <input type="password" id="pwd" name="pwd" placeholder="请输入密码" class="form-control" required="required">                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="add-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div><div class="modal fade edit-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title" id="title">修改</h4>            </div>            <div class="modal-body">                <form method="post" id="edit-form">                    <div class="form-group">                        <label>用户名</label>                        <input type="text" id="B-name" name="name" placeholder="请输入用户名" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>登录名</label>                        <input type="text" id="B-login_name" name="login_name" placeholder="请输入登陆账户" class="form-control" required="required">                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="edit-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div>{/block}{block name="linkjs"}{/block}{block name="js"}<script>    $.validator.setDefaults({        highlight: function (e) {            $(e).closest(".form-group").removeClass("has-success").addClass("has-error")        },        success: function (e) {            e.closest(".form-group").removeClass("has-error").addClass("has-success")        },        errorElement: "span",        errorPlacement: function (e, r) {            e.appendTo(r.is(":radio") || r.is(":checkbox") ? r.parent().parent().parent() : r.parent())        },        errorClass: "help-block m-b-none",        validClass: "help-block m-b-none",    })    $('#table').bootstrapTable({        search: true,        pagination: true,        url: '_URL_/admin/admin_list',        showRefresh: true,        showToggle: true,        showColumns: true,        method: 'post',        height: 600,        pageSize: 10,        pageNumber: 1,//开始的时候是第几页        pageList: [5, 10, 15, 25,'ALL'],        queryParamsType: '',        dataField:'data',//指定        sidePagination: "server",        exportDataType: 'all',        exportTypes: ['json', 'xml', 'csv', 'txt', 'sql', 'excel'],        exportOptions: {fileName: '导出'},        toolbar: "#exampleToolbar",        iconSize: "outline",        sortOrder:"desc",        icons: {            refresh: "glyphicon-repeat",            toggle: "glyphicon-list-alt",            columns: "glyphicon-list",            export: 'glyphicon glyphicon-export'        }    });    function statusFormatter(value, row, index) {        if (value == 1) {            return '<a class="label label-primary defriend" href="#" data_id="'+row.uid+'">已激活</a>'        } else {            return '<a class="label label-danger defriend" href="#"  data_id="'+row.uid+'">已禁用</a>'        }    }    function showloginFormatter(value, row, index) {        return '<a class="" href="admin/loginlist/' + row.uid + '">查看</a>'    }    function groupFormatter(value, row, index) {        if(value.length){            var group = [];            for(var i=0; i<value.length;i++){                group.push(value[i]['title']);            }            return group.join('，');        }else{            return '无分组';        }    }    $(document).ready(function () {        // Tooltip        $('[data-toggle="tooltip"]').tooltip({            trigger: 'hover'        });        user_operate($('#table'),'admin/add','admin/del','admin/edit/','admin/reset','admin/defriend');    });</script>{/block}