{extend name="base/tablebase"/}{block name="title"}权限规则管理{/block}{block name="table"}<!-- Example Card View --><div class="example-wrap">    <div class="example">        <div class="btn-group hidden-xs" id="exampleToolbar" role="group">            <button type="button" class="btn btn-outline btn-default" id="add" data-toggle="tooltip" data-animation="false" data-original-title="添加">                <i class="glyphicon glyphicon-plus" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="defriend" data-toggle="tooltip" data-animation="false" data-original-title="禁用">                <i class="glyphicon glyphicon-ban-circle" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="del" data-toggle="tooltip" data-animation="false" data-original-title="删除">                <i class="glyphicon glyphicon-trash" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="edit" data-toggle="tooltip" data-animation="false" data-original-title="修改">                <i class="glyphicon glyphicon-edit" aria-hidden="true"></i>            </button>        </div>        <table id="table" data-toggle="table" data-card-view="true" data-mobile-responsive="true" data-click-to-select="true" data-unique-id="id" data-show-export="true">            <thead>            <tr>                <th data-field="state" data-checkbox="true"></th>                <th data-field="id">UID</th>                <th data-field="title" data-sortable="true">名称</th>                <th data-field="name" data-sortable="true">模块/控制器/方法</th>                <th data-field="parent" data-sortable="true">类别</th>                <th data-field="cre_time" data-sortable="true">创建时间</th>                <th data-field="up_time" data-sortable="true">更新时间</th>                <th data-field="remarks">备注</th>                <th data-field="status" data-formatter="statusFormatter" data-align="center" data-halign="center" data-sortable="true">状态</th>            </tr>            </thead>        </table>    </div></div>{/block}{block name="model"}<div class="modal fade add-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title">添加</h4>            </div>            <div class="modal-body">                <form method="post" id="add-form">                    <div class="form-group">                        <label>名称</label>                        <input type="text" id="title" name="title" placeholder="请输入名称" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>模块/控制器/方法</label>                        <input type="text" id="name" name="name" placeholder="请输入模块/控制器/方法" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>类别</label>                        <input type="text" id="parent" name="parent" placeholder="类别" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>备注</label>                        <input type="text" id="remarks" name="remarks" placeholder="请输入备注" class="form-control">                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="add-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div><div class="modal fade edit-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title">修改</h4>            </div>            <div class="modal-body">                <form method="post" id="edit-form">                    <div class="form-group">                        <label>名称</label>                        <input type="text" id="B-title" name="title" placeholder="请输入名称" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>模块/控制器/方法</label>                        <input type="text" id="B-name" name="name" placeholder="请输入模块/控制器/方法" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>类别</label>                        <input type="text" id="B-parent" name="parent" placeholder="类别" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>备注</label>                        <input type="text" id="B-remarks" name="remarks" placeholder="请输入备注" class="form-control">                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="edit-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div>{/block}{block name="linkjs"}{/block}{block name="js"}<script>    $.validator.setDefaults({        highlight: function (e) {            $(e).closest(".form-group").removeClass("has-success").addClass("has-error")        },        success: function (e) {            e.closest(".form-group").removeClass("has-error").addClass("has-success")        },        errorElement: "span",        errorPlacement: function (e, r) {            e.appendTo(r.is(":radio") || r.is(":checkbox") ? r.parent().parent().parent() : r.parent())        },        errorClass: "help-block m-b-none",        validClass: "help-block m-b-none",    })    $('#table').bootstrapTable({        search: true,        pagination: true,        url: '_URL_/admin/admin/group_rule_list',        showRefresh: true,        showToggle: true,        showColumns: true,        method: 'post',        height: 600,        pageSize: 12,        pageNumber: 1,//开始的时候是第几页        pageList: [5, 10, 15, 25,'ALL'],        queryParamsType: '',        dataField:'data',//指定        sidePagination: "server",//切记        exportTypes: ['json', 'xml', 'csv', 'txt', 'sql', 'excel'],        exportOptions: {fileName: '导出'},        toolbar: "#exampleToolbar",        iconSize: "outline",        sortOrder:"desc",        icons: {            refresh: "glyphicon-repeat",            toggle: "glyphicon-list-alt",            columns: "glyphicon-list",            export: 'glyphicon glyphicon-export'        }    });    function statusFormatter(value, row, index) {        row.uid = row.id;        if (value == 1) {            return '<a class="label label-primary defriend" href="#" data_id="'+row.uid+'">启用</a>'        } else {            return '<a class="label label-danger defriend" href="#"  data_id="'+row.uid+'">不启用</a>'        }    }    function showloginFormatter(value, row, index) {        return '<a class="" href="admin/loginlist/' + row.uid + '">查看</a>'    }    $(document).ready(function () {        // Tooltip        $('[data-toggle="tooltip"]').tooltip({            trigger: 'hover'        });        user_operate($('#table'),'admin/group_rule_add','admin/group_rule_del','admin/group_rule_edit/','','admin/group_rule_defriend');    });</script>{/block}